<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <h4 class="heading">Enter Something</h4>
      <input id="todo-input" type="text" />
      <button onclick="addItem()" class="button expanded">Submit</button>
  <ul id="list-items">
  </ul>
</body>


<style>
  .heading {
  margin: 40px 0 15px;
  text-transform: uppercase;
  font-weight: bolder;
}
#list-items {
  margin-top: 30px;
}
#list-items li {
  font-size: 1.1em;
  text-transform: capitalize;
}

</style>



<script>
  // items array that contains all todo items
// JSON.parse is used to parse the stringified items from localStorage
// if localStorage is empty, make the items variable an empty array
var items = JSON.parse(localStorage.getItem('todo-list')) || [];

// function to add item to the items array
function addItem() {
  var inputBox = document.querySelector('#todo-input');
  var item = inputBox.value
  if (item === "")
    return alert("Enter Something");

  // If input is valid, add item to items array
  items.push({
    value: item,
    time: (new Date()).toLocaleDateString("en-IN")
  })
  
  // then convert to a string with JSON.stringify and save to localStorage
  localStorage.setItem('todo-list', JSON.stringify(items));
  
  // call function to list all items
  listItems();
  
  // clear input box
  inputBox.value = "";
}

// function to remove item from array with Array.splice()
// removes item, then saves new items array to localStorage
function deleteItem(index) {
  items.splice(index, 1);
  localStorage.setItem('todo-list', JSON.stringify(items))
  listItems();
}


// function that generates list of items and populates the html
function listItems() {
  var list = "";
  for (var i = 0; i < items.length; i++) {
    list+=`<li>${items[i].value} <span class='label alert' onclick='deleteItem(${i})'>delete</span></li>`
  }
  document.querySelector("#list-items").innerHTML = list;
}

// function to run when page loads
(function() {
  listItems();
})();
</script>
</html>